<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>NASA Weather ‚Äî –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ–≥–æ–¥—ã</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#03041c; --glass: rgba(255,255,255,0.06);
      --accent:#00d0ff; --accent-2:#8b5cff; --text:#e7f0ff;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:Roboto,system-ui,Arial; color:var(--text);
      background: radial-gradient(ellipse at bottom, #0b1026 0%, #03041c 50%), linear-gradient(180deg,#00102166,transparent);
      min-height:100vh; display:flex; align-items:center; justify-content:center; padding:40px;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="800" height="600"><rect width="100%" height="100%" fill="%2303041c"/></svg>');
    }
    .card{
      width:100%; max-width:900px; background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); border-radius:18px; padding:22px; box-shadow: 0 10px 30px rgba(2,6,23,0.7);
      border:1px solid rgba(255,255,255,0.04);
      display:grid; grid-template-columns: 1fr 360px; gap:20px; align-items:start;
    }
    header{grid-column:1/-1; display:flex; align-items:center; gap:14px}
    .logo{width:64px;height:64px;border-radius:12px;background:linear-gradient(135deg,var(--accent),var(--accent-2));display:flex;align-items:center;justify-content:center;font-weight:700}
    .logo span{font-size:20px;color:#021126}
    h1{margin:0;font-size:20px}
    p.lead{margin:0;opacity:0.8;font-size:13px}

    .controls{display:flex;gap:8px;margin-top:12px}
    input[type="text"]{flex:1;padding:12px 14px;border-radius:10px;border:0;background:var(--glass);color:var(--text);outline:none}
    button{padding:10px 12px;border-radius:10px;border:0;background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021126;font-weight:600;cursor:pointer}
    button.ghost{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--text)}

    .main{
      padding:16px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:12px;
      min-height:260px; display:flex;flex-direction:column;justify-content:center;align-items:flex-start;gap:10px;
    }
    .temp{font-size:54px;font-weight:700;line-height:1}
    .meta{display:flex;gap:12px;font-size:14px;opacity:0.9}

    .side{
      padding:16px;background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));border-radius:12px;min-height:260px;display:flex;flex-direction:column;gap:12px;align-items:center;justify-content:center
    }
    .icon{width:120px;height:120px;border-radius:12px;background:linear-gradient(135deg,#00112233,#11104444);display:flex;align-items:center;justify-content:center;font-size:48px}
    .details{width:100%;display:flex;flex-direction:column;gap:6px}
    .row{display:flex;justify-content:space-between;font-size:14px}

    footer.small{grid-column:1/-1;text-align:center;font-size:12px;opacity:0.6;margin-top:8px}

    /* small screens */
    @media (max-width:820px){.card{grid-template-columns:1fr;}.side{order: -1}.temp{font-size:44px}}
  </style>
</head>
<body>
  <div class="card" role="application">
    <header>
      <div class="logo" aria-hidden><span>NS</span></div>
      <div>
        <h1>NASA Weather ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø–æ–≥–æ–¥—É</h1>
        <p class="lead">–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≥–µ–æ–ª–æ–∫–∞—Ü–∏—é ‚Äî –¥–∞–Ω–Ω—ã–µ –∏–∑ Open‚ÄëMeteo (–±–µ–∑ API‚Äë–∫–ª—é—á–∞).</p>
        <div class="controls">
          <input id="city" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Bishkek, London, New York" />
          <button id="search">–ü–æ–∏—Å–∫</button>
          <button id="gps" class="ghost">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ</button>
        </div>
      </div>
    </header>

    <section class="main" aria-live="polite">
      <div id="place">‚Äî</div>
      <div class="temp" id="temp">‚Äî¬∞C</div>
      <div class="meta"><div id="desc">‚Äî</div><div id="time">‚Äî</div></div>
      <div style="height:8px"></div>
      <div class="details">
        <div class="row"><span>–í–µ—Ç–µ—Ä</span><span id="wind">‚Äî –º/—Å</span></div>
        <div class="row"><span>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</span><span id="winddir">‚Äî</span></div>
        <div class="row"><span>–î–∞–≤–ª–µ–Ω–∏–µ</span><span id="press">‚Äî hPa</span></div>
      </div>
    </section>

    <aside class="side">
      <div class="icon" id="icon">ü™ê</div>
      <div style="width:100%">
        <div class="row"><strong>–û—Å–∞–¥–∫–∏</strong><span id="precip">‚Äî</span></div>
        <div class="row"><strong>–í–ª–∞–∂–Ω–æ—Å—Ç—å</strong><span id="humidity">‚Äî</span></div>
        <div class="row"><strong>–ò—Å—Ç–æ—á–Ω–∏–∫</strong><span>Open‚ÄëMeteo</span></div>
      </div>
    </aside>

    <footer class="small">–î–µ–º–æ: NASA-themed UI. –ö–æ–¥ –æ—Ç–∫—Ä—ã—Ç ‚Äî –º–æ–∂–Ω–æ –ø—Ä–∞–≤–∏—Ç—å. –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∑–∞–ø—Ä–æ—Å–µ.</footer>
  </div>

  <script>
    const $ = id => document.getElementById(id);
    const searchBtn = $('search');
    const gpsBtn = $('gps');
    const cityInput = $('city');

    searchBtn.addEventListener('click', ()=> queryByName(cityInput.value.trim()));
    cityInput.addEventListener('keydown', e=>{ if(e.key==='Enter') queryByName(cityInput.value.trim()) });
    gpsBtn.addEventListener('click', ()=>{
      if(!navigator.geolocation) return alert('–ì–µ–æ–ª–æ–∫–∞—Ü–∏—è –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ');
      navigator.geolocation.getCurrentPosition(p=> fetchWeather(p.coords.latitude, p.coords.longitude, '–¢–µ–∫—É—â–µ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ'), err=> alert('–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –ø–æ–∑–∏—Ü–∏—é: '+err.message))
    });

    async function queryByName(name){
      if(!name) return alert('–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞');
      setStatus('–ò–¥—ë—Ç –ø–æ–∏—Å–∫...');
      try{
        const geo = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(name)}&count=5&language=ru`)
          .then(r=>r.json());
        if(!geo.results || geo.results.length===0) return setStatus('–ì–æ—Ä–æ–¥ –Ω–µ –Ω–∞–π–¥–µ–Ω');
        const res = geo.results[0];
        fetchWeather(res.latitude, res.longitude, `${res.name}${res.country ? ', '+res.country : ''}`);
      }catch(e){ setStatus('–û—à–∏–±–∫–∞ –≥–µ–æ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è'); console.error(e) }
    }

    async function fetchWeather(lat, lon, placeName=''){
      setStatus('–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–≥–æ–¥—ã...');
      try{
        // current_weather provides temperature, windspeed, winddirection
        const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&hourly=relativehumidity_2m,pressure_msl,precipitation&timezone=auto`;
        const data = await fetch(url).then(r=>r.json());
        if(!data || !data.current_weather) return setStatus('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –æ –ø–æ–≥–æ–¥–µ');

        const cw = data.current_weather;
        const temp = cw.temperature;
        const wind = cw.windspeed;
        const winddir = cw.winddirection;
        const time = cw.time;

        // For humidity/pressure/precipitation we try to find nearest hourly value
        let humidity = '‚Äî', pressure='‚Äî', precip='‚Äî';
        if(data.hourly){
          const tIndex = data.hourly.time ? data.hourly.time.indexOf(time) : -1;
          if(tIndex>=0){
            if(data.hourly.relativehumidity_2m) humidity = data.hourly.relativehumidity_2m[tIndex] + ' %';
            if(data.hourly.pressure_msl) pressure = data.hourly.pressure_msl[tIndex] + ' hPa';
            if(data.hourly.precipitation) precip = data.hourly.precipitation[tIndex] + ' mm';
          }
        }

        // update UI
        $('place').textContent = placeName || `${lat.toFixed(2)}, ${lon.toFixed(2)}`;
        $('temp').textContent = Math.round(temp) + '¬∞C';
        const desc = weatherCodeToText(cw.weathercode);
        $('desc').textContent = desc;
        $('time').textContent = new Date(time).toLocaleString();
        $('wind').textContent = wind + ' –º/—Å';
        $('winddir').textContent = Math.round(winddir) + '¬∞';
        $('press').textContent = pressure;
        $('precip').textContent = precip;
        $('humidity').textContent = humidity;
        $('icon').textContent = weatherCodeToIcon(cw.weathercode);
      }catch(e){ console.error(e); setStatus('–û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ –ø–æ–≥–æ–¥—ã') }
    }

    function setStatus(text){
      $('place').textContent = text;
      $('temp').textContent = '‚Äî¬∞C';
      $('desc').textContent = '';
      $('time').textContent = '';
      $('wind').textContent = '‚Äî';
      $('winddir').textContent = '‚Äî';
      $('press').textContent = '‚Äî';
      $('precip').textContent = '‚Äî';
      $('humidity').textContent = '‚Äî';
      $('icon').textContent = 'ü™ê';
    }

    // Minimal mapping of Open-Meteo weather codes to text and simple emoji icons
    function weatherCodeToText(code){
      const map = {
        0: '–Ø—Å–Ω–æ', 1: '–ú–∞–ª–æ–æ–±–ª–∞—á–Ω–æ', 2: '–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–±–ª–∞—á–Ω–æ—Å—Ç—å', 3: '–ü–∞—Å–º—É—Ä–Ω–æ',
        45: '–¢—É–º–∞–Ω', 48: '–ü—ã–ª—å/–∏–∑–º–æ—Ä–æ–∑—å',
        51: '–õ—ë–≥–∫–∞—è –º–æ—Ä–æ—Å—å', 53: '–£–º–µ—Ä–µ–Ω–Ω–∞—è –º–æ—Ä–æ—Å—å', 55: '–°–∏–ª—å–Ω–∞—è –º–æ—Ä–æ—Å—å',
        61: '–ù–µ–±–æ–ª—å—à–æ–π –¥–æ–∂–¥—å', 63: '–î–æ–∂–¥—å', 65: '–°–∏–ª—å–Ω—ã–π –¥–æ–∂–¥—å',
        71: '–°–Ω–µ–≥', 73: '–°–Ω–µ–≥–æ–ø–∞–¥', 75: '–°–∏–ª—å–Ω—ã–π —Å–Ω–µ–≥',
        80: '–õ–∏–≤–Ω–∏', 81: '–°–∏–ª—å–Ω—ã–µ –ª–∏–≤–Ω–∏', 82: '–ü–æ—Ä—ã–≤–∏—Å—Ç—ã–µ –ª–∏–≤–Ω–∏',
        95: '–ì—Ä–æ–∑–∞', 99: '–ì—Ä–∞–¥'
      };
      return map[code] || ('–ö–æ–¥ '+code);
    }
    function weatherCodeToIcon(code){
      if(code===0) return '‚òÄÔ∏è';
      if(code<=3) return '‚õÖ';
      if([45,48].includes(code)) return 'üå´Ô∏è';
      if([51,53,55,61,63,65,80,81,82].includes(code)) return 'üåßÔ∏è';
      if([71,73,75].includes(code)) return '‚ùÑÔ∏è';
      if([95,99].includes(code)) return '‚õàÔ∏è';
      return 'ü™ê';
    }

    // quick demo: show Bishkek on load
    queryByName('Bishkek');
  </script>
</body>
</html>